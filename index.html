<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Réservation Salle des Fêtes</title>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <h1>Réservation de la Salle des Fêtes</h1>
    <div class="main-flex">
        <div id="calendar-container">
            <div id="calendar"></div>
        </div>
        <div class="salle-info">
            <strong>Salle du Vourzet</strong><br>
            <b>Capacité :</b><br>
            304 places assises<br>
            600 places debout<br>
            <em>Aucun événement dépassant cette jauge ne sera autorisé</em>
            <br><br>
            <b>Équipements inclus :</b>
            <ul>
                <li>Sonorisation</li>
                <li>Éclairage</li>
                <li>Tables et chaises</li>
                <li>Cuisine équipée</li>
            </ul>
            <b>Équipements non inclus :</b>
            <ul>
                <li>Vaisselle (assiettes, verres, etc.)</li>
                <li>Couverts</li>
            </ul>
        </div>
    </div>

    <!-- Modal Popup -->
    <div class="modal" id="reservationModal">
        <div class="modal-content">
            <button class="close-modal" id="closeModal" title="Fermer">&times;</button>
            <form id="reservationForm">
                <label>Vous êtes :</label>
                <div class="type-btns">
                    <button type="button" id="btnParticulier" class="selected">Particulier</button>
                    <button type="button" id="btnAssociation">Association</button>
                </div>
                <input type="hidden" id="typeDemandeur" name="typeDemandeur" value="particulier">

                <div id="associationField" style="display:none;">
                    <label for="nomAssociation">Nom de l'association :</label>
                    <input type="text" id="nomAssociation" name="nomAssociation">
                </div>

                <label for="nom">Nom :</label>
                <input type="text" id="nom" name="nom" required>

                <label for="prenom">Prénom :</label>
                <input type="text" id="prenom" name="prenom" required>

                <label for="telephone">Numéro de téléphone :</label>
                <input type="tel" id="telephone" name="telephone" required pattern="^(\+?\d{1,3}[- ]?)?\d{6,14}$" placeholder="ex : 0601020304">

                <div class="dates-flex">
                    <div>
                        <label for="date">Date de début :</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                    <div>
                        <label for="dateFin">Date de fin :</label>
                        <input type="date" id="dateFin" name="dateFin" required>
                    </div>
                </div>

                <label for="email">Email :</label>
                <input type="email" id="email" name="email" required>

                <label for="message">Message :</label>
                <textarea id="message" name="message" rows="3"></textarea>

                <button type="submit">Réserver</button>
            </form>
            <div class="confirmation" id="confirmation"></div>
        </div>
    </div>

    <hr>
    <section id="admin-section">
        <h2>Administration des réservations</h2>
        <div id="reservations-list"></div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <script src="calendar.js"></script>
    <script>
    // Gestion des boutons Particulier/Association
    document.addEventListener('DOMContentLoaded', function() {
        var btnParticulier = document.getElementById('btnParticulier');
        var btnAssociation = document.getElementById('btnAssociation');
        var typeDemandeur = document.getElementById('typeDemandeur');
        var associationField = document.getElementById('associationField');
        var nomAssociation = document.getElementById('nomAssociation');

        function selectType(type) {
            if (type === 'association') {
                btnAssociation.classList.add('selected');
                btnParticulier.classList.remove('selected');
                associationField.style.display = 'block';
                nomAssociation.required = true;
                typeDemandeur.value = 'association';
            } else {
                btnParticulier.classList.add('selected');
                btnAssociation.classList.remove('selected');
                associationField.style.display = 'none';
                nomAssociation.required = false;
                typeDemandeur.value = 'particulier';
            }
        }

        btnParticulier.addEventListener('click', function(e) {
            e.preventDefault();
            selectType('particulier');
        });
        btnAssociation.addEventListener('click', function(e) {
            e.preventDefault();
            selectType('association');
        });
    });
    </script>
</body>
</html>